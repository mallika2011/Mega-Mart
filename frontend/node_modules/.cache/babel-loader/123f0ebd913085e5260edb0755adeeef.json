{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _keymaster = _interopRequireDefault(require(\"keymaster\"));\n\nvar _Store = _interopRequireDefault(require(\"./Store\"));\n\nvar _Header = _interopRequireDefault(require(\"./Header.react\"));\n\nvar _Footer = _interopRequireDefault(require(\"./Footer.react\"));\n\nvar _Constants = _interopRequireDefault(require(\"./Constants\"));\n\nvar _Bem = require(\"./Bem\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  _setPrototypeOf(subClass.prototype, superClass && superClass.prototype);\n\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) {\n    return o.__proto__;\n  };\n\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defaultKeyFilter = _keymaster.default.filter;\nvar Store = new _Store.default();\n\nvar handleClose = function handleClose() {\n  _keymaster.default.deleteScope('react-popup');\n\n  _keymaster.default.filter = defaultKeyFilter;\n  Store.close();\n};\n\nvar initialState = {\n  id: null,\n  title: null,\n  buttons: null,\n  content: null,\n  visible: false,\n  className: null,\n  noOverlay: false,\n  position: false,\n  closeOnOutsideClick: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n};\n\nvar Popup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _createClass(Popup, null, [{\n    key: \"addShowListener\",\n    value: function addShowListener(callback) {\n      Store.on(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"removeShowListener\",\n    value: function removeShowListener(callback) {\n      Store.removeListener(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"addCloseListener\",\n    value: function addCloseListener(callback) {\n      Store.on(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"removeCloseListener\",\n    value: function removeCloseListener(callback) {\n      Store.removeListener(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"register\",\n    value: function register(data) {\n      var id = Store.getId();\n      Store.popups[id] = Object.assign({}, initialState, data);\n      return id;\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(id) {\n      if (!Object.prototype.hasOwnProperty.call(Store.popups, id)) {\n        return false;\n      }\n      /** Add popup to queue */\n\n\n      Store.queue.push(id);\n      /** Dispatch queue */\n\n      Store.dispatch();\n      return id;\n    }\n  }, {\n    key: \"create\",\n    value: function create(data, bringToFront) {\n      /** Register popup */\n      var id = this.register(data);\n      /** Queue popup */\n\n      if (bringToFront === true) {\n        var currentlyActive = Store.active;\n        Store.active = null;\n        this.queue(id);\n        this.queue(currentlyActive);\n        Store.dispatch();\n      } else {\n        this.queue(id);\n      }\n\n      return id;\n    }\n  }, {\n    key: \"alert\",\n    value: function alert(text, title, bringToFront) {\n      var data = {\n        title: title,\n        content: text,\n        buttons: {\n          right: ['ok']\n        }\n      };\n      return this.create(data, bringToFront);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      Store.close();\n    }\n  }, {\n    key: \"registerPlugin\",\n    value: function registerPlugin(name, callback) {\n      Store.plugins[name] = callback.bind(this);\n    }\n  }, {\n    key: \"plugins\",\n    value: function plugins() {\n      return Store.plugins;\n    }\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      return Store.refreshPosition(position);\n    }\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      return Store.clearQueue();\n    }\n  }]);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Popup).call(this, props));\n    initialState.closeOnOutsideClick = _this.props.closeOnOutsideClick;\n    _this.state = initialState;\n    _this.bound = {\n      onShow: _this.onShow.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onClose: _this.onClose.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onRefresh: _this.onRefresh.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      containerClick: _this.containerClick.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      handleButtonClick: _this.handleButtonClick.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    };\n    _this.boxRef = null;\n    _this.defaultKeyBindings = {\n      ok: _this.props.defaultOkKey,\n      cancel: _this.props.defaultCancelKey\n    };\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Store.on(_Constants.default.SHOW, this.bound.onShow);\n      Store.on(_Constants.default.CLOSE, this.bound.onClose);\n      Store.on(_Constants.default.REFRESH, this.bound.onRefresh);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.boxRef) {\n        this.boxRef.focus();\n      }\n\n      this.setPosition(this.state.position);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Store.removeListener(_Constants.default.SHOW, this.bound.onShow);\n      Store.removeListener(_Constants.default.CLOSE, this.bound.onClose);\n      Store.removeListener(_Constants.default.REFRESH, this.bound.onRefresh);\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     * @private\n     */\n\n  }, {\n    key: \"onRefresh\",\n    value: function onRefresh(position) {\n      this.setPosition(position);\n    }\n    /**\n     * On popup close\n     * @private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n      this.state.onClose(this.state.id, this.state.title);\n      this.setState(initialState);\n    }\n    /**\n     * On popup show\n     * @private\n     */\n\n  }, {\n    key: \"onShow\",\n    value: function onShow(id) {\n      var _this2 = this;\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = function () {\n        return true;\n      };\n\n      var popup = Store.activePopup();\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'left')) {\n        popup.buttons.left = [];\n      }\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'right')) {\n        popup.buttons.right = [];\n      }\n\n      this.setState({\n        id: id,\n        title: popup.title,\n        content: popup.content,\n        buttons: popup.buttons,\n        visible: true,\n        className: popup.className,\n        noOverlay: popup.noOverlay,\n        position: popup.position,\n        closeOnOutsideClick: popup.closeOnOutsideClick,\n        onClose: popup.onClose,\n        onOpen: popup.onOpen\n      }, function () {\n        _keymaster.default.setScope('react-popup');\n\n        _this2.state.onOpen(_this2.state.id, _this2.state.title);\n\n        if (_this2.props.escToClose) {\n          (0, _keymaster.default)('esc', 'react-popup', _this2.handleKeyEvent.bind(_this2, 'cancel', _this2.state.id));\n        }\n\n        if (_this2.state.buttons) {\n          if (_this2.state.buttons.left.length) {\n            _this2.state.buttons.left.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n\n          if (_this2.state.buttons.right.length) {\n            _this2.state.buttons.right.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var box = this.boxRef;\n      var boxPosition = position;\n\n      if (!box) {\n        return;\n      }\n\n      if (!boxPosition) {\n        boxPosition = this.state.position;\n      }\n\n      if (!boxPosition) {\n        box.style.opacity = 1;\n        box.style.top = null;\n        box.style.left = null;\n        box.style.margin = null;\n        return;\n      }\n\n      if (typeof boxPosition === 'function') {\n        boxPosition.call(null, box);\n        return;\n      }\n\n      box.style.top = \"\".concat(parseInt(boxPosition.y, 10), \"px\");\n      box.style.left = \"\".concat(parseInt(boxPosition.x, 10), \"px\");\n      box.style.margin = 0;\n      box.style.opacity = 1;\n    }\n    /**\n     * Handle container click\n     * @param e\n     * @private\n     */\n\n  }, {\n    key: \"containerClick\",\n    value: function containerClick() {\n      if (this.state.closeOnOutsideClick) {\n        handleClose();\n      }\n    }\n  }, {\n    key: \"bindKeyEvents\",\n    value: function bindKeyEvents(button) {\n      var code = null;\n\n      if (typeof button === 'string') {\n        code = this.defaultKeyBindings[button];\n      } else if (Object.prototype.hasOwnProperty.call(button, 'key')) {\n        code = button.key;\n      }\n\n      if (this.props.escToClose && code === 'esc') {\n        return;\n      }\n\n      if (code) {\n        (0, _keymaster.default)(code, 'react-popup', this.handleKeyEvent.bind(this, button, this.state.id));\n      }\n    }\n  }, {\n    key: \"handleKeyEvent\",\n    value: function handleKeyEvent(button, id, e) {\n      var excludeTags = ['INPUT', 'TEXTAREA', 'BUTTON'];\n\n      if (this.state.id !== id || button.key === 'enter' && excludeTags.indexOf(e.target.tagName) >= 0) {\n        return true;\n      }\n\n      if (typeof button === 'string') {\n        handleClose();\n      } else if (Object.prototype.hasOwnProperty.call(button, 'action')) {\n        this.handleButtonClick(button.action);\n      }\n\n      return false;\n    }\n    /**\n     * Handle button clicks\n     * @param action\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"handleButtonClick\",\n    value: function handleButtonClick(action) {\n      if (typeof action === 'function') {\n        return action.call(this, Store);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"className\",\n    value: function className(_className) {\n      return (0, _Bem.element)(_className, this.props.className);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var className = this.props.className;\n      var box = null;\n      var overlayStyle = {};\n\n      if (this.state.visible) {\n        var closeBtn = null;\n        className += \" \".concat(this.props.className, \"--visible\");\n\n        if (this.props.closeBtn) {\n          closeBtn = _react.default.createElement(\"button\", {\n            onClick: handleClose,\n            className: \"\".concat(this.props.className, \"__close\")\n          }, this.props.closeHtml);\n        }\n\n        var boxClass = this.className('box');\n\n        if (this.state.className) {\n          boxClass += \" \".concat((0, _Bem.modifier)(this.state.className, boxClass));\n        }\n\n        box = _react.default.createElement(\"article\", {\n          role: \"dialog\",\n          tabIndex: \"-1\",\n          ref: function ref(el) {\n            _this3.boxRef = el;\n          },\n          style: {\n            opacity: 0,\n            outline: 'none'\n          },\n          className: boxClass\n        }, closeBtn, _react.default.createElement(_Header.default, {\n          title: this.state.title,\n          className: this.className('box__header')\n        }), _react.default.createElement(\"div\", {\n          className: this.className('box__body')\n        }, this.state.content), _react.default.createElement(_Footer.default, {\n          className: this.className('box__footer'),\n          btnClass: this.props.btnClass,\n          buttonClick: this.bound.handleButtonClick,\n          onClose: handleClose,\n          onOk: handleClose,\n          defaultOk: this.props.defaultOk,\n          defaultCancel: this.props.defaultCancel,\n          buttons: this.state.buttons\n        }));\n      }\n\n      if (this.state.noOverlay) {\n        overlayStyle.background = 'transparent';\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: className\n      }, _react.default.createElement(\"div\", {\n        role: \"presentation\",\n        onClick: this.bound.containerClick,\n        className: this.className('overlay'),\n        style: overlayStyle\n      }), box);\n    }\n  }]);\n\n  _inherits(Popup, _React$Component);\n\n  return Popup;\n}(_react.default.Component);\n\n_defineProperty(Popup, \"defaultProps\", {\n  className: 'mm-popup',\n  btnClass: 'mm-popup__btn',\n  closeBtn: true,\n  closeHtml: null,\n  defaultOk: 'Ok',\n  defaultOkKey: 'enter',\n  defaultCancel: 'Cancel',\n  defaultCancelKey: 'esc',\n  closeOnOutsideClick: true,\n  escToClose: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n});\n\nPopup.propTypes = {\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  closeBtn: _propTypes.default.bool,\n  closeHtml: _propTypes.default.node,\n  defaultOk: _propTypes.default.string,\n  defaultOkKey: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string,\n  defaultCancelKey: _propTypes.default.string,\n  closeOnOutsideClick: _propTypes.default.bool,\n  escToClose: _propTypes.default.bool,\n  onClose: _propTypes.default.func,\n  onOpen: _propTypes.default.func\n};\nvar _default = Popup;\nexports.default = _default;","map":{"version":3,"sources":["/home/mallika/Desktop/DASS/Assn/A2/Bulk-Purchase-App/frontend/node_modules/react-popup/dist/Popup.react.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireDefault","require","_propTypes","_keymaster","_Store","_Header","_Footer","_Constants","_Bem","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_inherits","subClass","superClass","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_possibleConstructorReturn","self","call","_assertThisInitialized","_getPrototypeOf","getPrototypeOf","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","ReferenceError","_defineProperty","defaultKeyFilter","filter","Store","handleClose","deleteScope","close","initialState","id","title","buttons","content","visible","className","noOverlay","position","closeOnOutsideClick","onClose","onOpen","Popup","_React$Component","addShowListener","callback","on","SHOW","removeShowListener","removeListener","addCloseListener","CLOSE","removeCloseListener","register","data","getId","popups","assign","queue","hasOwnProperty","push","dispatch","create","bringToFront","currentlyActive","active","alert","text","right","registerPlugin","name","plugins","bind","refreshPosition","clearQueue","_this","state","bound","onShow","onRefresh","containerClick","handleButtonClick","boxRef","defaultKeyBindings","ok","defaultOkKey","cancel","defaultCancelKey","componentDidMount","REFRESH","componentDidUpdate","focus","setPosition","componentWillUnmount","setState","_this2","popup","activePopup","left","setScope","escToClose","handleKeyEvent","forEach","button","bindKeyEvents","box","boxPosition","style","opacity","top","margin","concat","parseInt","y","x","code","e","excludeTags","indexOf","tagName","action","_className","element","render","_this3","overlayStyle","closeBtn","createElement","onClick","closeHtml","boxClass","modifier","role","tabIndex","ref","el","outline","btnClass","buttonClick","onOk","defaultOk","defaultCancel","background","Component","propTypes","string","bool","node","func","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _keymaster = _interopRequireDefault(require(\"keymaster\"));\n\nvar _Store = _interopRequireDefault(require(\"./Store\"));\n\nvar _Header = _interopRequireDefault(require(\"./Header.react\"));\n\nvar _Footer = _interopRequireDefault(require(\"./Footer.react\"));\n\nvar _Constants = _interopRequireDefault(require(\"./Constants\"));\n\nvar _Bem = require(\"./Bem\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar defaultKeyFilter = _keymaster.default.filter;\nvar Store = new _Store.default();\n\nvar handleClose = function handleClose() {\n  _keymaster.default.deleteScope('react-popup');\n\n  _keymaster.default.filter = defaultKeyFilter;\n  Store.close();\n};\n\nvar initialState = {\n  id: null,\n  title: null,\n  buttons: null,\n  content: null,\n  visible: false,\n  className: null,\n  noOverlay: false,\n  position: false,\n  closeOnOutsideClick: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n};\n\nvar Popup =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _createClass(Popup, null, [{\n    key: \"addShowListener\",\n    value: function addShowListener(callback) {\n      Store.on(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"removeShowListener\",\n    value: function removeShowListener(callback) {\n      Store.removeListener(_Constants.default.SHOW, callback);\n    }\n  }, {\n    key: \"addCloseListener\",\n    value: function addCloseListener(callback) {\n      Store.on(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"removeCloseListener\",\n    value: function removeCloseListener(callback) {\n      Store.removeListener(_Constants.default.CLOSE, callback);\n    }\n  }, {\n    key: \"register\",\n    value: function register(data) {\n      var id = Store.getId();\n      Store.popups[id] = Object.assign({}, initialState, data);\n      return id;\n    }\n  }, {\n    key: \"queue\",\n    value: function queue(id) {\n      if (!Object.prototype.hasOwnProperty.call(Store.popups, id)) {\n        return false;\n      }\n      /** Add popup to queue */\n\n\n      Store.queue.push(id);\n      /** Dispatch queue */\n\n      Store.dispatch();\n      return id;\n    }\n  }, {\n    key: \"create\",\n    value: function create(data, bringToFront) {\n      /** Register popup */\n      var id = this.register(data);\n      /** Queue popup */\n\n      if (bringToFront === true) {\n        var currentlyActive = Store.active;\n        Store.active = null;\n        this.queue(id);\n        this.queue(currentlyActive);\n        Store.dispatch();\n      } else {\n        this.queue(id);\n      }\n\n      return id;\n    }\n  }, {\n    key: \"alert\",\n    value: function alert(text, title, bringToFront) {\n      var data = {\n        title: title,\n        content: text,\n        buttons: {\n          right: ['ok']\n        }\n      };\n      return this.create(data, bringToFront);\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      Store.close();\n    }\n  }, {\n    key: \"registerPlugin\",\n    value: function registerPlugin(name, callback) {\n      Store.plugins[name] = callback.bind(this);\n    }\n  }, {\n    key: \"plugins\",\n    value: function plugins() {\n      return Store.plugins;\n    }\n  }, {\n    key: \"refreshPosition\",\n    value: function refreshPosition(position) {\n      return Store.refreshPosition(position);\n    }\n  }, {\n    key: \"clearQueue\",\n    value: function clearQueue() {\n      return Store.clearQueue();\n    }\n  }]);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Popup).call(this, props));\n    initialState.closeOnOutsideClick = _this.props.closeOnOutsideClick;\n    _this.state = initialState;\n    _this.bound = {\n      onShow: _this.onShow.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onClose: _this.onClose.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      onRefresh: _this.onRefresh.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      containerClick: _this.containerClick.bind(_assertThisInitialized(_assertThisInitialized(_this))),\n      handleButtonClick: _this.handleButtonClick.bind(_assertThisInitialized(_assertThisInitialized(_this)))\n    };\n    _this.boxRef = null;\n    _this.defaultKeyBindings = {\n      ok: _this.props.defaultOkKey,\n      cancel: _this.props.defaultCancelKey\n    };\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      Store.on(_Constants.default.SHOW, this.bound.onShow);\n      Store.on(_Constants.default.CLOSE, this.bound.onClose);\n      Store.on(_Constants.default.REFRESH, this.bound.onRefresh);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.boxRef) {\n        this.boxRef.focus();\n      }\n\n      this.setPosition(this.state.position);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Store.removeListener(_Constants.default.SHOW, this.bound.onShow);\n      Store.removeListener(_Constants.default.CLOSE, this.bound.onClose);\n      Store.removeListener(_Constants.default.REFRESH, this.bound.onRefresh);\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n    }\n    /**\n     * Refresh popup position\n     * @param position\n     * @private\n     */\n\n  }, {\n    key: \"onRefresh\",\n    value: function onRefresh(position) {\n      this.setPosition(position);\n    }\n    /**\n     * On popup close\n     * @private\n     */\n\n  }, {\n    key: \"onClose\",\n    value: function onClose() {\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = defaultKeyFilter;\n      this.state.onClose(this.state.id, this.state.title);\n      this.setState(initialState);\n    }\n    /**\n     * On popup show\n     * @private\n     */\n\n  }, {\n    key: \"onShow\",\n    value: function onShow(id) {\n      var _this2 = this;\n\n      _keymaster.default.deleteScope('react-popup');\n\n      _keymaster.default.filter = function () {\n        return true;\n      };\n\n      var popup = Store.activePopup();\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'left')) {\n        popup.buttons.left = [];\n      }\n\n      if (popup.buttons && !Object.prototype.hasOwnProperty.call(popup.buttons, 'right')) {\n        popup.buttons.right = [];\n      }\n\n      this.setState({\n        id: id,\n        title: popup.title,\n        content: popup.content,\n        buttons: popup.buttons,\n        visible: true,\n        className: popup.className,\n        noOverlay: popup.noOverlay,\n        position: popup.position,\n        closeOnOutsideClick: popup.closeOnOutsideClick,\n        onClose: popup.onClose,\n        onOpen: popup.onOpen\n      }, function () {\n        _keymaster.default.setScope('react-popup');\n\n        _this2.state.onOpen(_this2.state.id, _this2.state.title);\n\n        if (_this2.props.escToClose) {\n          (0, _keymaster.default)('esc', 'react-popup', _this2.handleKeyEvent.bind(_this2, 'cancel', _this2.state.id));\n        }\n\n        if (_this2.state.buttons) {\n          if (_this2.state.buttons.left.length) {\n            _this2.state.buttons.left.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n\n          if (_this2.state.buttons.right.length) {\n            _this2.state.buttons.right.forEach(function (button) {\n              return _this2.bindKeyEvents(button);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      var box = this.boxRef;\n      var boxPosition = position;\n\n      if (!box) {\n        return;\n      }\n\n      if (!boxPosition) {\n        boxPosition = this.state.position;\n      }\n\n      if (!boxPosition) {\n        box.style.opacity = 1;\n        box.style.top = null;\n        box.style.left = null;\n        box.style.margin = null;\n        return;\n      }\n\n      if (typeof boxPosition === 'function') {\n        boxPosition.call(null, box);\n        return;\n      }\n\n      box.style.top = \"\".concat(parseInt(boxPosition.y, 10), \"px\");\n      box.style.left = \"\".concat(parseInt(boxPosition.x, 10), \"px\");\n      box.style.margin = 0;\n      box.style.opacity = 1;\n    }\n    /**\n     * Handle container click\n     * @param e\n     * @private\n     */\n\n  }, {\n    key: \"containerClick\",\n    value: function containerClick() {\n      if (this.state.closeOnOutsideClick) {\n        handleClose();\n      }\n    }\n  }, {\n    key: \"bindKeyEvents\",\n    value: function bindKeyEvents(button) {\n      var code = null;\n\n      if (typeof button === 'string') {\n        code = this.defaultKeyBindings[button];\n      } else if (Object.prototype.hasOwnProperty.call(button, 'key')) {\n        code = button.key;\n      }\n\n      if (this.props.escToClose && code === 'esc') {\n        return;\n      }\n\n      if (code) {\n        (0, _keymaster.default)(code, 'react-popup', this.handleKeyEvent.bind(this, button, this.state.id));\n      }\n    }\n  }, {\n    key: \"handleKeyEvent\",\n    value: function handleKeyEvent(button, id, e) {\n      var excludeTags = ['INPUT', 'TEXTAREA', 'BUTTON'];\n\n      if (this.state.id !== id || button.key === 'enter' && excludeTags.indexOf(e.target.tagName) >= 0) {\n        return true;\n      }\n\n      if (typeof button === 'string') {\n        handleClose();\n      } else if (Object.prototype.hasOwnProperty.call(button, 'action')) {\n        this.handleButtonClick(button.action);\n      }\n\n      return false;\n    }\n    /**\n     * Handle button clicks\n     * @param action\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"handleButtonClick\",\n    value: function handleButtonClick(action) {\n      if (typeof action === 'function') {\n        return action.call(this, Store);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"className\",\n    value: function className(_className) {\n      return (0, _Bem.element)(_className, this.props.className);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var className = this.props.className;\n      var box = null;\n      var overlayStyle = {};\n\n      if (this.state.visible) {\n        var closeBtn = null;\n        className += \" \".concat(this.props.className, \"--visible\");\n\n        if (this.props.closeBtn) {\n          closeBtn = _react.default.createElement(\"button\", {\n            onClick: handleClose,\n            className: \"\".concat(this.props.className, \"__close\")\n          }, this.props.closeHtml);\n        }\n\n        var boxClass = this.className('box');\n\n        if (this.state.className) {\n          boxClass += \" \".concat((0, _Bem.modifier)(this.state.className, boxClass));\n        }\n\n        box = _react.default.createElement(\"article\", {\n          role: \"dialog\",\n          tabIndex: \"-1\",\n          ref: function ref(el) {\n            _this3.boxRef = el;\n          },\n          style: {\n            opacity: 0,\n            outline: 'none'\n          },\n          className: boxClass\n        }, closeBtn, _react.default.createElement(_Header.default, {\n          title: this.state.title,\n          className: this.className('box__header')\n        }), _react.default.createElement(\"div\", {\n          className: this.className('box__body')\n        }, this.state.content), _react.default.createElement(_Footer.default, {\n          className: this.className('box__footer'),\n          btnClass: this.props.btnClass,\n          buttonClick: this.bound.handleButtonClick,\n          onClose: handleClose,\n          onOk: handleClose,\n          defaultOk: this.props.defaultOk,\n          defaultCancel: this.props.defaultCancel,\n          buttons: this.state.buttons\n        }));\n      }\n\n      if (this.state.noOverlay) {\n        overlayStyle.background = 'transparent';\n      }\n\n      return _react.default.createElement(\"div\", {\n        className: className\n      }, _react.default.createElement(\"div\", {\n        role: \"presentation\",\n        onClick: this.bound.containerClick,\n        className: this.className('overlay'),\n        style: overlayStyle\n      }), box);\n    }\n  }]);\n\n  _inherits(Popup, _React$Component);\n\n  return Popup;\n}(_react.default.Component);\n\n_defineProperty(Popup, \"defaultProps\", {\n  className: 'mm-popup',\n  btnClass: 'mm-popup__btn',\n  closeBtn: true,\n  closeHtml: null,\n  defaultOk: 'Ok',\n  defaultOkKey: 'enter',\n  defaultCancel: 'Cancel',\n  defaultCancelKey: 'esc',\n  closeOnOutsideClick: true,\n  escToClose: true,\n  onClose: function onClose() {},\n  onOpen: function onOpen() {}\n});\n\nPopup.propTypes = {\n  className: _propTypes.default.string,\n  btnClass: _propTypes.default.string,\n  closeBtn: _propTypes.default.bool,\n  closeHtml: _propTypes.default.node,\n  defaultOk: _propTypes.default.string,\n  defaultOkKey: _propTypes.default.string,\n  defaultCancel: _propTypes.default.string,\n  defaultCancelKey: _propTypes.default.string,\n  closeOnOutsideClick: _propTypes.default.bool,\n  escToClose: _propTypes.default.bool,\n  onClose: _propTypes.default.func,\n  onOpen: _propTypes.default.func\n};\nvar _default = Popup;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}